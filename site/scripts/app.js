document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".menu-icon"),t=document.querySelector(".nav-links");e&&e.addEventListener("click",()=>{t.classList.toggle("active")});const n=document.getElementById("slider-section");n&&initSlider();const o=document.getElementById("container");o&&window.location.pathname.includes("produits.php")&&loadProducts();const c=document.querySelector(".containerModifProduit");c&&loadAdminSelects();const i=document.getElementById("accueil-container");i&&loadAccueil();const s=document.querySelectorAll(".onglet a");s.length>0&&s.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".onglet").forEach(e=>e.classList.remove("active")),this.parentElement.classList.add("active");const t=this.getAttribute("href").substring(1),n=document.getElementById("login"),o=document.getElementById("sinscrire");n&&o&&(n.style.display="none",o.style.display="none",document.getElementById(t).style.display="block")})})});function initSlider(){fetch("data.xml").then(e=>e.text()).then(e=>(new DOMParser).parseFromString(e,"text/xml")).then(e=>{const t=e.querySelectorAll("slide"),n=document.getElementById("slider-section");let o="";t.forEach((e,t)=>{const c=e.querySelector("image").textContent,i=e.querySelector("description").textContent,a=0===t?"active":"",d=0===t?"":'loading="lazy"';o+=`<div class="slide ${a}"><img src="${c}" alt="${i}" ${d}><div class="slide-desc">${i}</div></div>`}),n.innerHTML=o,setInterval(nextSlide,5e3)}).catch(e=>console.error("Erreur slider:",e))}function nextSlide(){const e=document.querySelectorAll(".slide");if(0===e.length)return;let t=0;e.forEach((e,n)=>{e.classList.contains("active")&&(e.classList.remove("active"),t=n)});const n=(t+1)%e.length;e[n].classList.add("active")}function loadProducts(){fetch("controleur/initFormListeProduits.php").then(e=>e.text()).then(e=>{document.getElementById("container").innerHTML=e}).catch(e=>console.error("Erreur produits:",e))}function loadAdminSelects(){fetch("controleur/initSelectModifProduit.php").then(e=>e.text()).then(e=>{document.getElementById("rowModificationProduit").innerHTML=e}),fetch("controleur/initSelectSuprProduit.php").then(e=>e.text()).then(e=>{document.getElementById("rowSuppression").innerHTML=e})}function loadAccueil(){fetch("controleur/initIndex.php").then(e=>e.text()).then(e=>{const t=document.getElementById("accueil-container");t&&(t.innerHTML=e)}).catch(e=>console.error("Erreur accueil:",e))}